(function(g){g.console||(g.console={});g=g.console;for(var f,d=function(){},c=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");f=c.pop();)g[f]||(g[f]={});for(;f=a.pop();)g[f]||(g[f]=d);f=f=d=c=a=null})("undefined"!==typeof window?window:this);
(function(g,f){var d={create:function(c,a,b,e,h){var k=this;k.dataAttributeHighresName=b||"highres";k.dataAttributeLowresName=e||"lowres";d.resize(c.children);c.classList.remove("loading");c.addEventListener("click",function(){k.children&&0<k.children.length&&d.shrink(k.children[0])});for(b=0;b<c.children.length;b++)c.children[b].addEventListener("click",d.animate);a&&d.keys(c);"function"===typeof h&&h(c)},keys:function(c){var a=function(a){if(!a.defaultPrevented){var e=c||f.getElementsByClassName("zoomwall lightbox")[0];
if(e)switch(a.keyCode){case 27:e.children&&0<e.children.length&&d.shrink(e.children[0]);a.preventDefault();break;case 37:d.page(e,!1);a.preventDefault();break;case 39:d.page(e,!0),a.preventDefault()}}};f.addEventListener("keydown",a);return a},resizeRow:function(c,a){if(c&&1<c.length)for(var b in c)c.hasOwnProperty(b)&&(c[b].style.width=parseInt(g.getComputedStyle(c[b]).width,10)/a*100+"%",c[b].style.height="auto")},calcRowWidth:function(c){var a=0,b;for(b in c)c.hasOwnProperty(b)&&(a+=parseInt(g.getComputedStyle(c[b]).width,
10));return a},resize:function(c){for(var a=[],b=-1,e=0;e<c.length;e++){var h=c[e];h&&(-1==b?b=h.offsetTop:h.offsetTop!=b&&(d.resizeRow(a,d.calcRowWidth(a)),a=[],b=h.offsetTop),a.push(h))}d.resizeRow(a,d.calcRowWidth(a))},reset:function(c){c.style.transform="translate(0, 0) scale(1)";c.style.webkitTransform="translate(0, 0) scale(1)";c.classList.remove("active")},shrink:function(c){c.parentNode.classList.remove("lightbox");d.reset(c);for(var a=c.previousElementSibling;a;)d.reset(a),a=a.previousElementSibling;
for(a=c.nextElementSibling;a;)d.reset(a),a=a.nextElementSibling;c.dataset.lowres&&(c.src=c.dataset.lowres)},expand:function(c){c.classList.add("active");c.parentNode.classList.add("lightbox");var a=g.getComputedStyle(c.parentNode),b=parseInt(a.width,10),e=parseInt(a.height,10),h=c.parentNode.getBoundingClientRect().top,a=g.getComputedStyle(c),k=parseInt(a.width,10),f=parseInt(a.height,10),d=g.innerHeight;e<g.innerHeight?d=e:0<h&&(d-=h);c.dataset[this.dataAttributeHighresName]&&(c.src!=c.dataset[this.dataAttributeHighresName]&&
void 0===c.dataset[this.dataAttributeLowresName]&&(c.dataset[this.dataAttributeLowresName]=c.src),c.src=c.dataset[this.dataAttributeHighresName]);var l=[];l.push(c);for(a=c.nextElementSibling;a&&a.offsetTop==c.offsetTop;)l.push(a),a=a.nextElementSibling;for(a=c.previousElementSibling;a&&a.offsetTop==c.offsetTop;)l.unshift(a),a=a.previousElementSibling;a=d/f;k*a>b&&(a=b/k);var m=h-c.parentNode.offsetTop+c.offsetTop;if(e<g.innerHeight||f*a<e)m-=d/2-f*a/2;0<h&&(m-=h);for(e=h=0;e<l.length&&l[e]!=c;e++)h+=
parseInt(g.getComputedStyle(l[e]).width,10)*a;h=b/2-k*a/2-h;e=0;for(d=l.length-1;0<=d&&l[d]!=c;d--)e+=parseInt(g.getComputedStyle(l[d]).width,10)*a;e=b/2-k*a/2-e;for(k=b=c=0;k<l.length;k++){c+=b*a-b;var b=parseInt(g.getComputedStyle(l[k]).width,10),d=(c+h)/b*100,n=-m/parseInt(g.getComputedStyle(l[k]).height,10)*100;l[k].style.transformOrigin="0% 0%";l[k].style.webkitTransformOrigin="0% 0%";l[k].style.transform="translate("+d.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")";l[k].style.webkitTransform=
"translate("+d.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var f=f*(a-1)-m,p,b=c=0,k=l[l.length-1].nextElementSibling,d=-1;k;){n=k.offsetTop;n==d?c+=b*a-b:(-1!=d&&(c=0,f+=p*(a-1)),d=n);b=parseInt(g.getComputedStyle(k).width,10);p=parseInt(g.getComputedStyle(k).height,10);var n=(c+h)/b*100,r=f/p*100;k.style.transformOrigin="0% 0%";k.style.webkitTransformOrigin="0% 0%";k.style.transform="translate("+n.toFixed(8)+"%, "+r.toFixed(8)+"%) scale("+a.toFixed(8)+")";k.style.webkitTransform=
"translate("+n.toFixed(8)+"%, "+r.toFixed(8)+"%) scale("+a.toFixed(8)+")";k=k.nextElementSibling}p=-m;b=c=0;l=l[0].previousElementSibling;for(m=-1;l;)h=l.offsetTop,h==m?c-=b*a-b:(c=0,p-=parseInt(g.getComputedStyle(l).height,10)*(a-1),m=h),b=parseInt(g.getComputedStyle(l).width,10),h=(c-e)/b*100,f=p/parseInt(g.getComputedStyle(l).height,10)*100,l.style.transformOrigin="100% 0%",l.style.webkitTransformOrigin="100% 0%",l.style.transform="translate("+h.toFixed(8)+"%, "+f.toFixed(8)+"%) scale("+a.toFixed(8)+
")",l.style.webkitTransform="translate("+h.toFixed(8)+"%, "+f.toFixed(8)+"%) scale("+a.toFixed(8)+")",l=l.previousElementSibling},animate:function(c){if(this.classList.contains("active"))d.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),b=0;b<a.length;b++)a[b].classList.remove("active");d.expand(this)}c.stopPropagation()},page:function(c,a){var b=c.getElementsByClassName("active");if(b&&0<b.length){var b=b[0],e;if(e=a?b.nextElementSibling:b.previousElementSibling)b.classList.remove("active"),
b.dataset.lowres&&(b.src=b.dataset.lowres),d.expand(e)}}};g.zoomwall=d})("undefined"!==typeof window?window:this,document);
(function(g){function f(a,c){for(var b=c.split(".");b.length;){if(!(b[0]in a))return!1;a=a[b.shift()]}return a}function d(b,h){return b.replace(c,function(a,c,b,e,g,n,p,r){e=f(h,e);var v="",q;if(!e)return"!"===b?d(g,h):p?d(r,h):"";if(!b)return d(n,h);if("@"===b){a=h._key;c=h._val;for(q in e)e.hasOwnProperty(q)&&(h._key=q,h._val=e[q],v+=d(g,h));h._key=a;h._val=c;return v}}).replace(a,function(a,c,b){return(a=f(h,b))||0===a?"%"===c?(new Option(a)).text.replace(/"/g,"&quot;"):a:""})}var c=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,
a=/\{\{([=%])(.+?)\}\}/g,b=function(a){this.t=a};b.prototype.render=function(a){return d(this.t,a)};g.t=b})("undefined"!==typeof window?window:this);
(function(g,f){g.echo=function(d,c,a){d=d||"data-src-img";c=c||"src";a=a||100;var b=function(a){this.elem=a;this.render();this.listen()},e=f.documentElement.classList.contains("is-binded-echo")||"",h=[],k=function(){for(var a=0;a<h.length;a++){var b=h[a],e=b.getBoundingClientRect();if((0<=e.top&&0<=e.left&&e.top)<=(g.innerHeight||f.documentElement.clientHeight)){var e=b,d=a;-1!==h.indexOf(b)&&h.splice(d,1);e.src=e.dataset[c]||e.getAttribute("data-"+c)}}},w=function(a,c){function b(){d=0;k=+new Date;
f=a.apply(e,h);h=e=null}var e,h,f,d,k=0;return function(){e=this;h=arguments;var a=new Date-k;d||(a>=c?b():d=setTimeout(b,c-a));return f}}(k,a),u=function(){var a=!1;try{var c=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});g.addEventListener("test",function(){},c)}catch(b){}return a}();b.prototype={init:function(){h.push(this.elem)},render:function(){k()},listen:function(){e||(g.addEventListener("scroll",w,u?{passive:!0}:!1),f.documentElement.classList.add("is-binded-echo"))}};
var l=f.getElementsByClassName(d)||"";l&&function(){for(var a=0;a<l.length;a++)(new b(l[a])).init()}()}})("undefined"!==typeof window?window:this,document);(function(g,f){g.doesFontExist=function(d){var c=f.createElement("canvas").getContext("2d");c.font="72px monospace";var a=c.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width;c.font="72px '"+d+"', monospace";return c.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width==a?!1:!0}})("undefined"!==typeof window?window:this,document);
(function(g,f){g.loadJsCss=function(d,c){var a=this;a.files=d;a.js=[];a.head=f.getElementsByTagName("head")[0]||"";a.body=f.body||"";a.ref=f.getElementsByTagName("script")[0]||"";a.callback=c||function(){};a.loadStyle=function(c){var b=f.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=c;a.head.appendChild(b)};a.loadScript=function(c){var b=f.createElement("script");b.type="text/javascript";b.async=!0;b.src=a.js[c];b.onload=function(){++c<a.js.length?a.loadScript(c):a.callback()};
a.head.appendChild(b);a.ref.parentNode?a.ref.parentNode.insertBefore(b,a.ref):(a.body||a.head).appendChild(b)};var b,e;b=0;for(e=a.files.length;b<e;b+=1)/\.js$|\.js\?/.test(a.files[b])&&a.js.push(a.files[b]),/\.css$|\.css\?|\/css\?/.test(a.files[b])&&a.loadStyle(a.files[b]);b=e=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(g,f){var d=function(){var a="ontouchstart"in f[c]||"",b="onwheel"in f.createElement("div")||void 0!==f.onmousewheel||"",d=f.title||"",w=navigator.userAgent||"",u=function(){var a=new Date,b=a.getDate(),c=a.getFullYear(),a=a.getMonth(),a=a+1;10>b&&(b="0"+b);10>a&&(a="0"+a);return c+"-"+a+"-"+b}(),l="";w&&g.platform&&(l=platform.description||"",f.title=d+" ["+(u?" "+u:"")+(l?" "+l:"")+(a||b?" with":"")+(a?" touch":"")+(a&&b?",":"")+(b?" mousewheel":"")+"]");var m=f.getElementsByClassName("zoomwall")[0]||
"",n=function(a,b,c){b=f.getElementById(b)||"";c=f.getElementById(c)||"";return(a=-1!==["boolean","number","string","symbol","function"].indexOf(typeof a)?JSON.parse(a):a)&&b&&c?(new t(b.innerHTML||"")).render(a):{}},p=function(a,b,c){var e=f.body||"",d=function(){return c&&"function"===typeof c&&c()};try{var h=b.cloneNode(!1);if(f.createRange){var g=f.createRange();g.selectNode(e);var k=g.createContextualFragment(a);h.appendChild(k);return b.parentNode?b.parentNode.replaceChild(h,b):b.innerHTML=
a,d()}h.innerHTML=a;return b.parentNode?b.parentNode.replaceChild(f.createDocumentFragment.appendChild(h),b):b.innerHTML=a,d()}catch(l){console.log(l)}},r=function(a,b,c,e,d){d=d||"";var h=f.getElementById(b)||"",g=f.getElementById(c)||"",k=function(){return e&&"function"===typeof e&&e()};a&&h&&g&&(a=n(a,b,c),d?(g.innerHTML=a,k()):p(a,g,k))},v=function(a){return new Promise(function(b,c){var e;try{if(e=JSON.parse(a),!e.images[0].src)throw Error("incomplete JSON data: no src");}catch(d){console.log("cannot init generateGallery",
d);return}r(e,"template_zoomwall","target_zoomwall",function(){0<f.getElementsByClassName("data-src-img").length?b():c()},!0)})},q,y=function(){clearTimeout(q);q=null;zoomwall.create(m,!0,"src",null,function(){m.style.visibility="visible";m.style.opacity=1})},x,z=function(){clearTimeout(x);x=null;echo("data-src-img","src")},a=new Headers;fetch("./libs/picturewall/json/zoomwall.json",{headers:a,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();throw Error("cannot fetch","./libs/picturewall/json/zoomwall.json");
}).then(function(a){v(a).then(function(a){return a}).then(function(a){q=setTimeout(y,100)}).then(function(a){x=setTimeout(z,200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",a)})})["catch"](function(a){console.log("cannot parse","./libs/picturewall/json/zoomwall.json")})},c="documentElement",a=["./libs/picturewall/css/bundle.min.css"],b=function(a){var b=g.location.protocol||"";return"http:"===b?"http":"https:"===b?"https":a?"http":""}(!0);"classList"in f.createElement("_")||
a.push(b+"://cdn.jsdelivr.net/npm/classlist.js@1.1.20150312/classList.min.js");"undefined"!==typeof g.Element&&"dataset"in f[c]||a.push(b+"://cdn.jsdelivr.net/npm/element-dataset@2.2.6/lib/browser/index.cjs.min.js");(function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});g.addEventListener("test",function(){},b)}catch(c){}return a})()||a.push(b+"://cdn.jsdelivr.net/npm/dom4@1.8.5/build/dom4.max.min.js");g.Promise||a.push(b+"://cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");
g.fetch||a.push(b+"://cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");a.push(b+"://cdn.jsdelivr.net/npm/platform@1.3.4/platform.min.js");new loadJsCss([b+"://fonts.googleapis.com/css?family=Roboto:400&subset=cyrillic"],function(){var b,c=function(){clearInterval(b);b=null;new loadJsCss(a,d)},g=function(){doesFontExist("Roboto")&&c()};(function(){var a=f.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))})()?b=setInterval(g,100):(b=null,c())})})("undefined"!==typeof window?window:this,
document);
//# sourceMappingURL=bundle.min.js.map
